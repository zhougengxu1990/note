# 架构学习
## 前置
### 系统衡量指标
伸缩性
- 应用服务伸缩性: 只处理代码逻辑,直接扩展服务器
- 缓存服务伸缩性: 注意新扩展服务缓存不存在的问题,可以提前准备好缓存数据;或应用路由分发,逐步在新的缓存服务器建立缓存达到完全可用
- 数据库服务伸缩性: 注意备份和扩展服务区别,依据业务对数据进行分库分表就是伸缩性的一种

扩展性
- 功能性需求: 一般通过事件驱动(消息队列)或分布式实现.

安全性
> 现有的,潜在的风险,是否有应对策略
- 系统和系统之间调用是否安全
- 系统的认证体系是否有问题(如token)
- 被爬虫的问题

### 整体优化思路
> 优化的点: 从用户使用我们系统开始,到我们响应用户为止
- 最根本的,sql的问题
- 服务间的问题,如服务间调用和网络问题,业务冲击
- 服务内的问题,使用缓存读写分离,异步处理等
- 最后,才是代码优化问题,使用多线程优化等等.代码优化占整体优化的比重很低

### 前端优化
### DNS优化
```
域名类型: 
1. 域名-->IP
2. CNAME: 域名-->域名
3. NS

域名服务器类型: 
1. 根服务器(逻辑服务器,背后有很多实体服务器和镜像服务器) https://www.internic.net/domain/named.root
2. 权威
3. 本地(LDNS)
```
DNS缓存
- 浏览器
- 系统
- hosts
- LDNS
- ...

负载均衡 
- 一个域名可以映射多个服务器ip
- 自己服务内部做反向代理多服务器负载均衡
- nginx,lvs

### CDN优化
### CDN扩展
### 网关作用
协议转换
路由转发
负载均衡
安全性

### 服务集群优化
使用集群
- 并行与并发
- 集群整体并发
- 无状态节点集群
- 单一服务节点集群
- 信息共享节点集群
- 信息一致节点集群

服务内并发
- 多进程
- 多线程
- 多协程(jdk19)

### 缓存和存储优化