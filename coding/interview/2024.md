# 2024
[toc]
## 联恩商钥
### 百万秒杀如何做
## 电信外包
### 如何多线程开发
### netty性能高的原因
- 非组塞io,利用了java的nio
- 零copy
- 内存池
- Reactor模式来处理网络事件,它将网络I/O和业务逻辑处理分离
### netty有哪些组件
- EventLoop 相当于工作线程
- EventLoopGroup EventLoop的集合
- ServerBootStrap/BootStrap
- ByteBuf
    - Pool和Unpool类型
    - Heap和Direct类型
    - Safe和Unsafe类型
- ChannelHandler
- ChannelPipeline
- Channel
- ChannelHandlerContext
- ChannelFuture
- ChannelOption
### 什么是tcp粘包
TCP粘包就是指发送方发送的若干包数据到达接收方时粘成了一包，从接收缓冲区来看，后一包数据的头紧接着前一包数据的尾，出现粘包的原因是多方面的，可能是来自发送方，也可能是来自接收方。
### 粘包的原因是什么
- tcp是基于字节流的,无法区分消息边界
- 发送方原因:Nagle算法,将多个小分组合并发送,减少网络io
- 接收方原因:接收缓存速度大于应用取的速度,多个分组会在缓存中并可能被应用粘包读取
### 如何解决粘包问题
- 发送方处理:关闭Nagle算法
- 接收方处理(区分消息边界)
    - 加入头尾标志区分
    - 固定长度区分
    - 消息体前加入消息长度区分,读取指定长度的消息体
### redis性能高的原因
- 内在存储
- 单线程
- 重新实现并优化了相关数据结构
- io多路复用
### redis数据结构和应用
### redis如何保证redis多个指令操作原子性
Lua脚本
### 什么是分布式
单机性能和程序优化无法满足计算或存储的要求,将多台服务器或数据存储组合在一起对外提供服务,同时提供高性能和高可用的服务,就是分布式
- 体现分而治之的思想
- 理论cap-->base
### 什么是微服务
服务划分和聚合成为微服务.不是划分越小越好,微服务关键在于服务,而不在于微.
## 上海擎朗(准备)
### 准备springcloud
### 准备kafka
### 准备网络协议
### mqtt协议 
### 准备o2o的理解
### 准备物联网相关知识
## 上海擎朗(面试)
### springcloud有哪些组件
- 网关gateway
- 熔断器(只回答到这些)
- Feign
- 注册中心
### 网关如何进行服务转发的
配置文件或动态配置中,routes中每项,包括`id`:“自定义id”,`uri`:跳转的路由.`predicates`:匹配机制pattern
```yml
spring:
    cloud:
        gateway:
            routes:
                // id 
                id: id
                //转发路由
                uri: lb://api
                //断言,判断条件
                predicates:
                    - Path=/api/**
                filters:
                    ...
```

### 内部服务是如何调用的
Feign
```java
/**
* name: 微服务名称
* url: 一般用于调试,手动指定调用地址
* configuration: Feign配置类.可以自定义Feign Encoder、Decoder、LogLevel、Contract
* fallback: 定义容错处理类
**/
@FeignClient(name = "github-client", url = "https://api.github.com", configuration = GitHubExampleConfig.class)
public interface GitHubClient {
    @RequestMapping(value = "/search/repositories", method = RequestMethod.GET)
    String searchRepo(@RequestParam("q") String queryStr);
}
```

### Feign有什么其他应用
> https://www.cnblogs.com/wlandwl/p/feign.html#_caption1
- hytrix,Feign请求超时问题,延长hytrix时间或关闭hytrix超时功能
- 弹性客户端
    - 客户端负载均衡
    - 断路器模块
    - fallback
    - bulkhead
### synchronized锁有哪些
无锁-->偏向锁-->轻量锁-->重量级锁
### 有返回值的线程调用
Callable
### 线程调用超时了怎么办
```java
指定超时时间
future.get(30, TimeUnit.SECONDS);
```

### mysql in或not in查询会使用到索引吗
In 在5.7以前，如果是小范围的查询，还是走索引的，type属于range，在随着数据量的增大时会自动进行全表的扫描（并且与要查询的结果是否包含在索引树中决定走index还是all）；not in则不走索引；
目前在8.0以后验证，发现无论是in not 或者<>,都会走索引；

<br/>

## 湃享
### 包装类型值的“==”和“equals”
### 基本类型值标识
### 死锁
- 产生的原因
- 如何避免
- 生产上如何解决
- 大厂如何解决
- 与并发的关系
### 并发问题及解决
### redis原子锁不同时间就解决问题了吗